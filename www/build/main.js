webpackJsonp([0],{147:function(n,l){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=147},180:function(n,l){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=180},218:function(n,l,t){"use strict";function u(n){return g._19(0,[(n()(),g.Z(0,0,null,null,2,"ion-nav",[],null,null,null,V.b,V.a)),g._14(6144,null,D.a,null,[$.a]),g.Y(2,4374528,null,0,$.a,[[2,S.a],[2,U.a],X.a,q.a,A.a,g.j,g.u,g.z,g.i,G.l,W.a,[2,H.a],B.a,g.k],{root:[0,"root"]},null),(n()(),g._18(-1,null,["\n"]))],function(n,l){n(l,2,0,l.component.rootPage)},null)}function e(n){return g._19(0,[(n()(),g.Z(0,0,null,null,6,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.openChat(n.context.$implicit)&&u}return u},Q.b,Q.a)),g.Y(1,1097728,null,3,nn.a,[ln.a,q.a,g.j,g.z,[2,tn.a]],null,null),g._16(335544320,1,{contentLabel:0}),g._16(603979776,2,{_buttons:1}),g._16(603979776,3,{_icons:1}),g.Y(5,16384,null,0,un.a,[],null,null),(n()(),g._18(6,2,["\n\t\t","\n\t"]))],null,function(n,l){n(l,6,0,l.context.$implicit.name)})}function a(n){return g._19(0,[(n()(),g._18(-1,null,["\n"])),(n()(),g.Z(1,0,null,null,10,"ion-header",[],null,null,null,null,null)),g.Y(2,16384,null,0,en.a,[q.a,g.j,g.z,[2,S.a]],null,null),(n()(),g._18(-1,null,["\n\n  "])),(n()(),g.Z(4,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,an.b,an.a)),g.Y(5,49152,null,0,on.a,[X.a,[2,S.a],[2,U.a],q.a,g.j,g.z],null,null),(n()(),g._18(-1,3,["\n    "])),(n()(),g.Z(7,0,null,3,2,"ion-title",[],null,null,null,sn.b,sn.a)),g.Y(8,49152,null,0,cn.a,[q.a,g.j,g.z,[2,rn.a],[2,on.a]],null,null),(n()(),g._18(-1,0,["List"])),(n()(),g._18(-1,3,["\n  "])),(n()(),g._18(-1,null,["\n\n"])),(n()(),g._18(-1,null,["\n\n\n"])),(n()(),g.Z(13,0,null,null,18,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,dn.b,dn.a)),g.Y(14,4374528,null,0,_n.a,[q.a,A.a,B.a,g.j,g.z,X.a,gn.a,g.u,[2,S.a],[2,U.a]],null,null),(n()(),g._18(-1,1,["\n\n\t"])),(n()(),g.U(16777216,null,1,1,null,e)),g.Y(17,802816,null,0,hn.h,[g.I,g.F,g.p],{ngForOf:[0,"ngForOf"]},null),(n()(),g._18(-1,1,["\n\n  "])),(n()(),g.Z(19,0,null,0,11,"ion-fab",[["bottom",""],["padding",""],["right",""]],null,null,null,pn.b,pn.a)),g.Y(20,1228800,null,2,fn.a,[A.a],null,null),g._16(335544320,4,{_mainButton:0}),g._16(603979776,5,{_fabLists:1}),(n()(),g._18(-1,0,["\n    "])),(n()(),g.Z(24,0,null,0,5,"button",[["ion-fab",""]],null,[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.createNode()&&u}return u},mn.b,mn.a)),g.Y(25,49152,[[4,4]],0,bn.a,[q.a,g.j,g.z],null,null),(n()(),g._18(-1,0,["  \n      "])),(n()(),g.Z(27,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g.Y(28,147456,null,0,vn.a,[q.a,g.j,g.z],{name:[0,"name"]},null),(n()(),g._18(-1,0,["\n    "])),(n()(),g._18(-1,0,["\n  "])),(n()(),g._18(-1,1,["\n\n"])),(n()(),g._18(-1,null,["\n"]))],function(n,l){n(l,17,0,l.component.nodes);n(l,28,0,"add")},function(n,l){n(l,4,0,g._11(l,5)._hidden,g._11(l,5)._sbPadding);n(l,13,0,g._11(l,14).statusbarPadding,g._11(l,14)._hasRefresher);n(l,27,0,g._11(l,28)._hidden)})}function o(n){return g._19(0,[(n()(),g.Z(0,0,null,null,1,"div",[["class","message-name"]],null,null,null,null,null)),(n()(),g._18(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.name)})}function i(n){return g._19(0,[(n()(),g.Z(0,0,null,null,6,"span",[["class","typing"]],null,null,null,null,null)),(n()(),g.Z(1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),g._18(-1,null,["•"])),(n()(),g.Z(3,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),g._18(-1,null,["•"])),(n()(),g.Z(5,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),g._18(-1,null,["•"]))],null,null)}function s(n){return g._19(0,[(n()(),g.Z(0,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(n,l){n(l,0,0,l.parent.context.$implicit.content)})}function c(n){return g._19(0,[(n()(),g.Z(0,0,null,null,17,"div",[],null,null,null,null,null)),(n()(),g._18(-1,null,["\n    "])),(n()(),g.Z(2,0,null,null,14,"div",[],null,null,null,null,null)),g.Y(3,278528,null,0,hn.g,[g.p,g.q,g.j,g.A],{ngClass:[0,"ngClass"]},null),(n()(),g._18(-1,null,["\n      "])),(n()(),g.U(16777216,null,null,1,null,o)),g.Y(6,16384,null,0,hn.i,[g.I,g.F],{ngIf:[0,"ngIf"]},null),(n()(),g._18(-1,null,["\n      \n      "])),(n()(),g.Z(8,0,null,null,7,"div",[["class","message-bubble"]],null,null,null,null,null)),(n()(),g._18(-1,null,["\n        "])),(n()(),g.U(16777216,null,null,1,null,i)),g.Y(11,16384,null,0,hn.i,[g.I,g.F],{ngIf:[0,"ngIf"]},null),(n()(),g._18(-1,null,["\n        "])),(n()(),g.U(16777216,null,null,1,null,s)),g.Y(14,16384,null,0,hn.i,[g.I,g.F],{ngIf:[0,"ngIf"]},null),(n()(),g._18(-1,null,["\n      "])),(n()(),g._18(-1,null,["\n    "])),(n()(),g._18(-1,null,["\n  "]))],function(n,l){n(l,3,0,l.context.$implicit.styleClass);n(l,6,0,l.context.$implicit.name);n(l,11,0,l.context.$implicit.typing);n(l,14,0,!l.context.$implicit.typing)},null)}function r(n){return g._19(0,[g._16(402653184,1,{content:0}),(n()(),g.Z(1,0,null,null,22,"ion-header",[],null,null,null,null,null)),g.Y(2,16384,null,0,en.a,[q.a,g.j,g.z,[2,S.a]],null,null),(n()(),g._18(-1,null,["\n  "])),(n()(),g.Z(4,0,null,null,18,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,an.b,an.a)),g.Y(5,49152,null,0,on.a,[X.a,[2,S.a],[2,U.a],q.a,g.j,g.z],null,null),(n()(),g._18(-1,3,["\n    "])),(n()(),g.Z(7,0,null,3,2,"ion-title",[],null,null,null,sn.b,sn.a)),g.Y(8,49152,null,0,cn.a,[q.a,g.j,g.z,[2,rn.a],[2,on.a]],null,null),(n()(),g._18(9,0,["\n    \t","\n    "])),(n()(),g._18(-1,3,["\n    "])),(n()(),g.Z(11,0,null,2,10,"ion-buttons",[["end",""]],null,null,null,null,null)),g.Y(12,16384,null,1,Zn.a,[q.a,g.j,g.z,[2,rn.a],[2,on.a]],null,null),g._16(603979776,2,{_buttons:1}),(n()(),g._18(-1,null,["\n    \t"])),(n()(),g.Z(15,0,null,null,5,"button",[["clear",""],["icon-only",""],["ion-button",""],["item-right",""]],null,[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.openEditModal()&&u}return u},jn.b,jn.a)),g.Y(16,1097728,[[2,4]],0,In.a,[[8,""],q.a,g.j,g.z],{clear:[0,"clear"]},null),(n()(),g._18(-1,0,["\n      "])),(n()(),g.Z(18,0,null,0,1,"ion-icon",[["name","md-create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g.Y(19,147456,null,0,vn.a,[q.a,g.j,g.z],{name:[0,"name"]},null),(n()(),g._18(-1,0,["   \n    "])),(n()(),g._18(-1,null,["\n    "])),(n()(),g._18(-1,3,["\n  "])),(n()(),g._18(-1,null,["\n"])),(n()(),g._18(-1,null,["\n\n"])),(n()(),g.Z(25,0,null,null,5,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,dn.b,dn.a)),g.Y(26,4374528,[[1,4]],0,_n.a,[q.a,A.a,B.a,g.j,g.z,X.a,gn.a,g.u,[2,S.a],[2,U.a]],null,null),(n()(),g._18(-1,1,["\n  "])),(n()(),g.U(16777216,null,1,1,null,c)),g.Y(29,802816,null,0,hn.h,[g.I,g.F,g.p],{ngForOf:[0,"ngForOf"]},null),(n()(),g._18(-1,1,["\n"])),(n()(),g._18(-1,null,["\n\n"])),(n()(),g.Z(32,0,null,null,23,"ion-footer",[],null,null,null,null,null)),g.Y(33,16384,null,0,Mn.a,[q.a,g.j,g.z,[2,S.a]],null,null),(n()(),g._18(-1,null,["\n  "])),(n()(),g.Z(35,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,Q.b,Q.a)),g.Y(36,1097728,null,3,nn.a,[ln.a,q.a,g.j,g.z,[2,tn.a]],null,null),g._16(335544320,3,{contentLabel:0}),g._16(603979776,4,{_buttons:1}),g._16(603979776,5,{_icons:1}),g.Y(40,16384,null,0,un.a,[],null,null),(n()(),g._18(-1,2,["\n    "])),(n()(),g.Z(42,0,null,3,4,"ion-input",[["placeholder","Enter message"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"]],function(n,l,t){var u=!0,e=n.component;if("ngModelChange"===l){u=!1!==(e.msgInput=t)&&u}if("keyup.enter"===l){u=!1!==e.send(e.msgInput)&&u}return u},zn.b,zn.a)),g.Y(43,671744,null,0,Pn.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),g._14(2048,null,Pn.f,null,[Pn.h]),g.Y(45,16384,null,0,Pn.g,[Pn.f],null,null),g.Y(46,5423104,null,0,Tn.a,[q.a,A.a,ln.a,X.a,g.j,g.z,[2,_n.a],[2,nn.a],[2,Pn.f],B.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(n()(),g._18(-1,2,["\n    "])),(n()(),g.Z(48,0,null,4,5,"button",[["clear",""],["icon-only",""],["ion-button",""],["item-right",""]],null,[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.openAttachOptions()&&u}return u},jn.b,jn.a)),g.Y(49,1097728,[[4,4]],0,In.a,[[8,""],q.a,g.j,g.z],{clear:[0,"clear"]},null),(n()(),g._18(-1,0,["\n    \t"])),(n()(),g.Z(51,0,null,0,1,"ion-icon",[["name","attach"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g.Y(52,147456,null,0,vn.a,[q.a,g.j,g.z],{name:[0,"name"]},null),(n()(),g._18(-1,0,["  \t\n    "])),(n()(),g._18(-1,2,["\n  "])),(n()(),g._18(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,16,0,"");n(l,19,0,"md-create");n(l,29,0,t.messages);n(l,43,0,t.msgInput);n(l,46,0,"text","Enter message");n(l,49,0,"");n(l,52,0,"attach")},function(n,l){var t=l.component;n(l,4,0,g._11(l,5)._hidden,g._11(l,5)._sbPadding);n(l,9,0,t.node.name);n(l,18,0,g._11(l,19)._hidden);n(l,25,0,g._11(l,26).statusbarPadding,g._11(l,26)._hasRefresher);n(l,42,0,g._11(l,45).ngClassUntouched,g._11(l,45).ngClassTouched,g._11(l,45).ngClassPristine,g._11(l,45).ngClassDirty,g._11(l,45).ngClassValid,g._11(l,45).ngClassInvalid,g._11(l,45).ngClassPending);n(l,51,0,g._11(l,52)._hidden)})}function d(n){return g._19(0,[(n()(),g._18(-1,null,["\n"])),(n()(),g.Z(1,0,null,null,23,"ion-header",[],null,null,null,null,null)),g.Y(2,16384,null,0,en.a,[q.a,g.j,g.z,[2,S.a]],null,null),(n()(),g._18(-1,null,["\n\n  "])),(n()(),g.Z(4,0,null,null,19,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,an.b,an.a)),g.Y(5,49152,null,0,on.a,[X.a,[2,S.a],[2,U.a],q.a,g.j,g.z],null,null),(n()(),g._18(-1,3,["\n    "])),(n()(),g.Z(7,0,null,3,2,"ion-title",[],null,null,null,sn.b,sn.a)),g.Y(8,49152,null,0,cn.a,[q.a,g.j,g.z,[2,rn.a],[2,on.a]],null,null),(n()(),g._18(-1,0,["Edit"])),(n()(),g._18(-1,3,["\n     "])),(n()(),g.Z(11,0,null,2,11,"ion-buttons",[["end",""]],null,null,null,null,null)),g.Y(12,16384,null,1,Zn.a,[q.a,g.j,g.z,[2,rn.a],[2,on.a]],null,null),g._16(603979776,1,{_buttons:1}),(n()(),g._18(-1,null,["\n    \t"])),(n()(),g.Z(15,0,null,null,2,"button",[["ion-button",""]],null,[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.cancel()&&u}return u},jn.b,jn.a)),g.Y(16,1097728,[[1,4]],0,In.a,[[8,""],q.a,g.j,g.z],null,null),(n()(),g._18(-1,0,["Cancel"])),(n()(),g._18(-1,null,["\n      "])),(n()(),g.Z(19,0,null,null,2,"button",[["ion-button",""]],null,[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.save()&&u}return u},jn.b,jn.a)),g.Y(20,1097728,[[1,4]],0,In.a,[[8,""],q.a,g.j,g.z],null,null),(n()(),g._18(-1,0,["Save"])),(n()(),g._18(-1,null,["\n    "])),(n()(),g._18(-1,3,["\n  "])),(n()(),g._18(-1,null,["\n\n"])),(n()(),g._18(-1,null,["\n\n\n"])),(n()(),g.Z(26,0,null,null,41,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,dn.b,dn.a)),g.Y(27,4374528,null,0,_n.a,[q.a,A.a,B.a,g.j,g.z,X.a,gn.a,g.u,[2,S.a],[2,U.a]],null,null),(n()(),g._18(-1,1,["\n\t\n  "])),(n()(),g.Z(29,0,null,1,16,"ion-item",[["class","item item-block"]],null,null,null,Q.b,Q.a)),g.Y(30,1097728,null,3,nn.a,[ln.a,q.a,g.j,g.z,[2,tn.a]],null,null),g._16(335544320,2,{contentLabel:0}),g._16(603979776,3,{_buttons:1}),g._16(603979776,4,{_icons:1}),g.Y(34,16384,null,0,un.a,[],null,null),(n()(),g._18(-1,2,["\n    "])),(n()(),g.Z(36,0,null,1,2,"ion-label",[["stacked",""]],null,null,null,null,null)),g.Y(37,16384,[[2,4]],0,Nn.a,[q.a,g.j,g.z,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),g._18(-1,null,["Name"])),(n()(),g._18(-1,2,["\n    "])),(n()(),g.Z(40,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var u=!0;if("ngModelChange"===l){u=!1!==(n.component.name=t)&&u}return u},zn.b,zn.a)),g.Y(41,671744,null,0,Pn.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),g._14(2048,null,Pn.f,null,[Pn.h]),g.Y(43,16384,null,0,Pn.g,[Pn.f],null,null),g.Y(44,5423104,null,0,Tn.a,[q.a,A.a,ln.a,X.a,g.j,g.z,[2,_n.a],[2,nn.a],[2,Pn.f],B.a],{type:[0,"type"]},null),(n()(),g._18(-1,2,["\n  "])),(n()(),g._18(-1,1,["\n\n    \n  "])),(n()(),g.Z(47,0,null,1,10,"ion-item",[["class","item item-block"],["no-lines",""]],null,null,null,Q.b,Q.a)),g.Y(48,1097728,null,3,nn.a,[ln.a,q.a,g.j,g.z,[2,tn.a]],null,null),g._16(335544320,5,{contentLabel:0}),g._16(603979776,6,{_buttons:1}),g._16(603979776,7,{_icons:1}),g.Y(52,16384,null,0,un.a,[],null,null),(n()(),g._18(-1,2,["\n    "])),(n()(),g.Z(54,0,null,1,2,"ion-label",[["class","gray"],["stacked",""]],null,null,null,null,null)),g.Y(55,16384,[[5,4]],0,Nn.a,[q.a,g.j,g.z,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),g._18(-1,null,["Script"])),(n()(),g._18(-1,2,["\n  "])),(n()(),g._18(-1,1,["\n  \n  "])),(n()(),g.Z(59,0,null,1,7,"ngx-codemirror",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,t){var u=!0;if("ngModelChange"===l){u=!1!==(n.component.script=t)&&u}return u},O.c,O.b)),g.Y(60,4374528,null,0,m.a,[m.c,g.u],{config:[0,"config"]},null),g._13(61,{lineNumbers:0}),g._14(1024,null,Pn.e,function(n){return[n]},[m.a]),g.Y(63,671744,null,0,Pn.h,[[8,null],[8,null],[8,null],[2,Pn.e]],{model:[0,"model"]},{update:"ngModelChange"}),g._14(2048,null,Pn.f,null,[Pn.h]),g.Y(65,16384,null,0,Pn.g,[Pn.f],null,null),(n()(),g._18(-1,null,["\n  "])),(n()(),g._18(-1,1,["  \t\n\n\n"])),(n()(),g._18(-1,null,["\n\n\n"]))],function(n,l){var t=l.component;n(l,41,0,t.name);n(l,44,0,"text");n(l,60,0,n(l,61,0,!0));n(l,63,0,t.script)},function(n,l){n(l,4,0,g._11(l,5)._hidden,g._11(l,5)._sbPadding);n(l,26,0,g._11(l,27).statusbarPadding,g._11(l,27)._hasRefresher);n(l,40,0,g._11(l,43).ngClassUntouched,g._11(l,43).ngClassTouched,g._11(l,43).ngClassPristine,g._11(l,43).ngClassDirty,g._11(l,43).ngClassValid,g._11(l,43).ngClassInvalid,g._11(l,43).ngClassPending);n(l,59,0,g._11(l,65).ngClassUntouched,g._11(l,65).ngClassTouched,g._11(l,65).ngClassPristine,g._11(l,65).ngClassDirty,g._11(l,65).ngClassValid,g._11(l,65).ngClassInvalid,g._11(l,65).ngClassPending)})}Object.defineProperty(l,"__esModule",{value:!0});var _=t(40),g=t(0),h=(t(3),t(53),t(83)),p=t(84),f=t(85),m=t(63),b=t(128),v=t(261),y="https://htserver.herokuapp.com",C=function(){function n(n){var l=this;this.http=n,this.currentRoomId=null,this.socket=v(y),this.socket.on("disconnect",function(){console.log("socket disconnect")}),this.socket.on("connect",function(){console.log("socket connect")}),this.socket.on("reconnect_attempt",function(){console.log("reconnect_attempt"),l.socket.io.opts.query={currentRoomId:l.currentRoomId}})}return n.prototype.setCurrentRoomId=function(n){this.currentRoomId=n},n.prototype.socketConnected=function(){return this.socket.connected},n.prototype.joinRoom=function(n){this.setCurrentRoomId(n),this.socket.emit("joinRoom",n)},n.prototype.listenForMessages=function(n){this.socket.on("message",n)},n.prototype.emitMessage=function(n,l){this.socket.emit("message",{message:n,room:l})},n.prototype.leaveRoom=function(n){this.setCurrentRoomId(null),this.socket.off("message"),this.socket.emit("leaveRoom",n)},n.prototype.getNodes=function(){return this.http.get(y+"/nodes")},n.prototype.getNode=function(n){return this.http.get(y+"/node?id="+n)},n.prototype.postNode=function(n,l){return this.http.post(y+"/node",{id:n,script:l.script,name:l.name})},n}(),k=function(){function n(n,l,t,u,e){var a=this;this.navCtrl=n,this.navParams=l,this.viewCtrl=t,this._codeMirror=u,this.server=e,this.nodeId="",this.script="",this.name="",this.nodeId=l.get("nodeId"),this.nodeId&&(console.log("sending get request for node "+this.nodeId),this.server.getNode(this.nodeId).subscribe(function(n){console.log(n),n.script&&(a.script=n.script),n.name&&(a.name=n.name)}))}return n.prototype.ngOnInit=function(){var n=this;this._codeMirror.instance$.subscribe(function(l){n.codemirror=l})},n.prototype.save=function(){var n=this;this.server.postNode(this.nodeId,{name:this.name,script:this.script}).subscribe(function(l){console.log(l),n.nodeId=l.node.id,n.viewCtrl.dismiss()},function(n){alert("error saving script")})},n.prototype.cancel=function(){this.viewCtrl.dismiss(null)},n}(),Y=t(286),Z=function(){function n(n,l,t,u,e,a,o){this.navCtrl=n,this.navParams=l,this.modalCtrl=t,this.actionSheetCtrl=u,this.geolocation=e,this.loadingCtrl=a,this.server=o,this.msgInput="",this.messages=[],this.node=this.navParams.get("node"),this.autoTyping=!1}return n.prototype.ngAfterViewInit=function(){Y(document).ready(function(){console.log("JQuery is working!!")})},n.prototype.ionViewWillEnter=function(){var n=this;this.systemMsg("connecting..."),console.log("asking server to send to room "+this.node.id),this.server.joinRoom(this.node.id),this.server.listenForMessages(function(l){n.receive(l)})},n.prototype.openAttachOptions=function(){var n=this;console.log("attach clicked");this.actionSheetCtrl.create({title:"Send Attachment",buttons:[{text:"Location",icon:"md-locate",handler:function(){console.log("Location clicked");var l=n.loadingCtrl.create({content:"Getting Location..."});l.present(),n.geolocation.getCurrentPosition().then(function(t){n.send(t.coords.latitude+" "+t.coords.longitude),l.dismiss()}).catch(function(n){console.log("Error getting location",n),l.dismiss()})}},{text:"Camera",icon:"camera",handler:function(){console.log("Camera clicked")}},{text:"Gallery",icon:"image",handler:function(){console.log("Gallery clicked")}},{text:"Cancel",icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}]}).present()},n.prototype.openEditModal=function(){var n=this,l=this.modalCtrl.create(k,{nodeId:this.node.id});l.onDidDismiss(function(l){n.server.getNode(n.node.id).subscribe(function(l){n.node=l})}),l.present()},n.prototype.chatMsg=function(n,l){this.displayMsg({styleClass:"chat-message "+l,content:n.message,name:"left"==l?n.name:null,typing:"left"==l})},n.prototype.systemMsg=function(n){this.displayMsg({styleClass:"system-message",content:n})},n.prototype.updateMarkEvents=function(){var n=this;setTimeout(function(){console.log("setting up events on marks"),Y("mark").off("click"),Y("mark").on("click",function(l){n.autoType(l.target.innerHTML)})},500)},n.prototype.autoType=function(n){var l=this;if(!this.autoTyping){this.autoTyping=!0;var t=function(n,u){var e=n.substr(0,1),a=n.substr(1);l.msgInput+=e,""!=a&&setTimeout(function(){t(a,u)},u)};t(n,90),setTimeout(function(){l.send(l.msgInput),l.autoTyping=!1},90*(n.length+5))}},n.prototype.displayMsg=function(n){var l=this;if(this.messages.push(n),n.typing){var t=this.messages.length-1;setTimeout(function(){l.messages[t].typing=!1,l.updateMarkEvents()},100*n.content.length)}this.content._scroll&&this.content.scrollTo(0,this.content.getContentDimensions().scrollHeight-48,500)},n.prototype.send=function(n){""!=n&&(this.chatMsg({message:n},"right"),this.server.emitMessage(n,this.node.id)),this.msgInput=""},n.prototype.receive=function(n){console.log("received message"),console.log(n),n&&(n.system?(n.message&&this.systemMsg(n.message),n.moveTo&&(this.node=n.moveTo)):this.chatMsg(n,"left"))},n.prototype.ionViewWillLeave=function(){this.server.leaveRoom(this.node.id)},n}(),j=function(){function n(n,l,t,u){this.navCtrl=n,this.navParams=l,this.modalCtrl=t,this.server=u,this.nodes=[]}return n.prototype.updateNodeList=function(){var n=this;this.server.getNodes().subscribe(function(l){console.log(l),n.nodes=l.nodes})},n.prototype.ionViewWillEnter=function(){console.log("ionViewDidLoad ListPage"),this.updateNodeList()},n.prototype.openChat=function(n){console.log(n),this.navCtrl.push(Z,{node:n})},n.prototype.createNode=function(){var n=this,l=this.modalCtrl.create(k,{nodeId:null});l.onDidDismiss(function(l){n.updateNodeList()}),l.present()},n}(),I=function(){return function(n,l,t){this.rootPage=j,n.ready().then(function(){l.styleDefault(),t.hide()})}}(),M=function(){return function(){}}(),z=t(54),P=t(287),T=t(288),x=t(289),w=t(290),R=t(291),L=t(292),N=t(293),E=t(294),F=t(295),O=t(216),V=t(296),D=t(43),$=t(59),S=t(5),U=t(19),X=t(6),q=t(1),A=t(4),G=t(9),W=t(35),H=t(18),B=t(8),J=g.X({encapsulation:2,styles:[],data:{}}),K=g.V("ng-component",I,function(n){return g._19(0,[(n()(),g.Z(0,0,null,null,1,"ng-component",[],null,null,null,u,J)),g.Y(1,49152,null,0,I,[A.a,p.a,h.a],null,null)],null,null)},{},{},[]),Q=t(89),nn=t(15),ln=t(14),tn=t(37),un=t(48),en=t(62),an=t(132),on=t(24),sn=t(133),cn=t(50),rn=t(39),dn=t(134),_n=t(22),gn=t(23),hn=t(11),pn=t(297),fn=t(71),mn=t(298),bn=t(47),vn=t(28),yn=t(10),Cn=t(60),kn=g.X({encapsulation:2,styles:[],data:{}}),Yn=g.V("page-list",j,function(n){return g._19(0,[(n()(),g.Z(0,0,null,null,1,"page-list",[],null,null,null,a,kn)),g.Y(1,49152,null,0,j,[U.a,yn.a,Cn.a,C],null,null)],null,null)},{},{},[]),Zn=t(82),jn=t(30),In=t(20),Mn=t(117),zn=t(217),Pn=t(13),Tn=t(58),xn=t(67),wn=t(75),Rn=g.X({encapsulation:2,styles:[],data:{}}),Ln=g.V("page-chat",Z,function(n){return g._19(0,[(n()(),g.Z(0,0,null,null,1,"page-chat",[],null,null,null,r,Rn)),g.Y(1,4243456,null,0,Z,[U.a,yn.a,Cn.a,xn.a,f.a,wn.a,C],null,null)],null,null)},{},{},[]),Nn=t(46),En=g.X({encapsulation:2,styles:[],data:{}}),Fn=g.V("page-edit",k,function(n){return g._19(0,[(n()(),g.Z(0,0,null,null,1,"page-edit",[],null,null,null,d,En)),g.Y(1,114688,null,0,k,[U.a,yn.a,S.a,m.c,C],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),On=t(125),Vn=t(99),Dn=t(122),$n=t(38),Sn=t(203),Un=t(56),Xn=t(49),qn=t(69),An=t(109),Gn=t(121),Wn=t(116),Hn=t(202),Bn=t(123),Jn=t(33),Kn=t(104),Qn=t(124),nl=g.W(M,[z.b],function(n){return g._7([g._8(512,g.i,g.S,[[8,[P.a,T.a,x.a,w.a,R.a,L.a,N.a,E.a,F.a,O.a,K,Yn,Ln,Fn]],[3,g.i],g.s]),g._8(5120,g.r,g._15,[[3,g.r]]),g._8(4608,hn.k,hn.j,[g.r,[2,hn.s]]),g._8(5120,g.b,g._1,[]),g._8(5120,g.p,g._9,[]),g._8(5120,g.q,g._12,[]),g._8(4608,_.c,_.q,[hn.c]),g._8(6144,g.D,null,[_.c]),g._8(4608,_.f,On.a,[]),g._8(5120,_.d,function(n,l,t,u,e){return[new _.k(n,l),new _.o(t),new _.n(u,e)]},[hn.c,g.u,hn.c,hn.c,_.f]),g._8(4608,_.e,_.e,[_.d,g.u]),g._8(135680,_.m,_.m,[hn.c]),g._8(4608,_.l,_.l,[_.e,_.m]),g._8(6144,g.B,null,[_.l]),g._8(6144,_.p,null,[_.m]),g._8(4608,g.G,g.G,[g.u]),g._8(4608,_.h,_.h,[hn.c]),g._8(4608,_.i,_.i,[hn.c]),g._8(4608,Pn.k,Pn.k,[]),g._8(4608,Pn.c,Pn.c,[]),g._8(4608,m.c,m.c,[]),g._8(4608,b.h,b.n,[hn.c,g.w,b.l]),g._8(4608,b.o,b.o,[b.h,b.m]),g._8(5120,b.a,function(n){return[n]},[b.o]),g._8(4608,b.k,b.k,[]),g._8(6144,b.i,null,[b.k]),g._8(4608,b.g,b.g,[b.i]),g._8(6144,b.b,null,[b.g]),g._8(4608,b.f,b.j,[b.b,g.o]),g._8(4608,b.c,b.c,[b.f]),g._8(4608,xn.a,xn.a,[X.a,q.a]),g._8(4608,Vn.a,Vn.a,[X.a,q.a]),g._8(4608,Dn.a,Dn.a,[]),g._8(4608,ln.a,ln.a,[]),g._8(4608,$n.a,$n.a,[A.a]),g._8(4608,gn.a,gn.a,[q.a,A.a,g.u,B.a]),g._8(4608,wn.a,wn.a,[X.a,q.a]),g._8(5120,hn.f,Sn.b,[hn.q,[2,hn.a],q.a]),g._8(4608,hn.e,hn.e,[hn.f]),g._8(5120,Un.b,Un.d,[X.a,Un.a]),g._8(5120,H.a,H.b,[X.a,Un.b,hn.e,Xn.b,g.i]),g._8(4608,Cn.a,Cn.a,[X.a,q.a,H.a]),g._8(4608,qn.a,qn.a,[X.a,q.a]),g._8(4608,An.a,An.a,[X.a,q.a,H.a]),g._8(4608,Gn.a,Gn.a,[q.a,A.a,B.a,X.a,G.l]),g._8(4608,Wn.a,Wn.a,[X.a,q.a]),g._8(4608,W.a,W.a,[A.a,q.a]),g._8(4608,f.a,f.a,[]),g._8(4608,p.a,p.a,[]),g._8(4608,h.a,h.a,[]),g._8(4608,C,C,[b.c]),g._8(512,hn.b,hn.b,[]),g._8(512,g.k,Hn.a,[]),g._8(256,q.b,{},[]),g._8(1024,Bn.a,Bn.b,[]),g._8(1024,A.a,A.b,[_.b,Bn.a,g.u]),g._8(1024,q.a,q.c,[q.b,A.a]),g._8(512,B.a,B.a,[A.a]),g._8(512,Jn.a,Jn.a,[]),g._8(512,X.a,X.a,[q.a,A.a,[2,Jn.a]]),g._8(512,G.l,G.l,[X.a]),g._8(256,Un.a,{links:[]},[]),g._8(512,g.h,g.h,[]),g._8(512,Kn.a,Kn.a,[g.h]),g._8(1024,Xn.b,Xn.c,[Kn.a,g.o]),g._8(1024,g.c,function(n,l,t,u,e,a,o,i,s,c,r,d,g){return[_.s(n),Qn.a(l),Dn.b(t,u),Gn.b(e,a,o,i,s),Xn.d(c,r,d,g)]},[[2,g.t],q.a,A.a,B.a,q.a,A.a,B.a,X.a,G.l,q.a,Un.a,Xn.b,g.u]),g._8(512,g.d,g.d,[[2,g.c]]),g._8(131584,g.f,g.f,[g.u,g.T,g.o,g.k,g.i,g.d]),g._8(512,g.e,g.e,[g.f]),g._8(512,_.a,_.a,[[3,_.a]]),g._8(512,Pn.j,Pn.j,[]),g._8(512,Pn.d,Pn.d,[]),g._8(512,Pn.i,Pn.i,[]),g._8(512,Sn.a,Sn.a,[]),g._8(512,m.b,m.b,[]),g._8(512,b.e,b.e,[]),g._8(512,b.d,b.d,[]),g._8(512,M,M,[]),g._8(256,b.l,"XSRF-TOKEN",[]),g._8(256,b.m,"X-XSRF-TOKEN",[]),g._8(256,z.a,I,[]),g._8(256,hn.a,"/",[])])});t(299);Object(g.M)(),Object(_.j)().bootstrapModuleFactory(nl)},283:function(n,l){}},[218]);